webpackJsonp([0],{1294:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=a(26),u=n(s),i=a(32),c=n(i),d=a(41),f=n(d),p=a(42),m=n(p),h=a(8),b=n(h),g=a(59),y=n(g),v=a(28),E=n(v),w=a(37),C=n(w),O=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(27),a(36),a(43),a(44),a(22),a(60),a(29),a(35);var _=a(0),k=n(_),j=a(19),x=a(39),S=a(1295),F=n(S),P=a(1296),U=n(P),N=a(137),R=C.default.Search,T=(E.default.Content,E.default.Footer,E.default.Header,function(e){function t(e){r(this,t);var a=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.componentWillMount=function(){a.getData()},a.checkChange=function(e){console.log(e),a.setState({selectedRowKeys:e})},a.onDelete=function(e){console.log(e);var t=a.state.userdata;(0,j.removeUser)(t[(0,x.catchIndex)(t,e)]).then(function(n){console.log(n.data),1==n.data.data&&(y.default.success({message:n.data.cmd}),a.setState({userdata:(0,x.delplace)(t,e)}))})},a.editClick=function(e){var t=a.form,n=a.state.userdata,r=(0,x.catchIndex)(n,e);console.log(r);var l=[];n[r].roles&&(l=n[r].roles),t.setFieldsValue({id:e,username:n[r].username,password:n[r].password,loginname:n[r].loginname,desc:n[r].desc,roles:l}),a.setState({visible:!0,tableRowKey:e,isUpdate:!0})},a.saveFormRef=function(e){a.form=e},a.handleCancel=function(){a.setState({visible:!1})},a.handleUpdate=function(){var e=a.form,t=a.state,n=t.userdata,r=t.tableRowKey;console.log(a.props.roles),e.validateFields(function(t,l){t||(l.rolesinfo=a.props.roles,(0,j.editUser)(l).then(function(t){console.log(t.data.data),1==t.data.data?(e.resetFields(),y.default.success({message:t.data.cmd}),a.setState({visible:!1,userdata:(0,x.replace)(n,r,l),olduserdata:(0,x.replace)(n,r,l)})):y.default.error({message:t.data.cmd})}))})},a.CreateItem=function(){a.setState({visible:!0,isUpdate:!1}),a.form.resetFields()},a.handleCreate=function(){var e=a.form;console.log(a.props.roles),e.validateFields(function(t,n){t||(n.rolesinfo=a.props.roles,(0,j.addUser)(n).then(function(t){console.log(t.data.data),1==t.data.data?(e.resetFields(),y.default.success({message:t.data.cmd}),a.getData()):y.default.error({message:t.data.cmd})}))}),a.setState({visible:!1,isUpdate:!1})},a.onChangeUserName=function(e){var t=e.target.value;a.setState({inname:t})},a.onSearchUserName=function(e){var t=a.state.olduserdata;a.setState({userdata:t.filter(function(t){return-1!==t.username.indexOf(e)}),loading:!1})},a.getData=function(){a.setState({loading:!0}),(0,j.getUserList)().then(function(e){a.setState({userdata:e.data.data,loading:!1,olduserdata:e.data.data})})},a.state={userdata:[],olduserdata:[],loading:!0,selectedRowKeys:[],tableRowKey:0,isUpdate:!1,visible:!1,inname:""},a}return o(t,e),O(t,[{key:"render",value:function(){var e=this.state,t=e.inname,a=e.userdata,n=e.visible,r=e.isUpdate,l=e.loading;return k.default.createElement("div",null,k.default.createElement("div",{className:"formBody"},k.default.createElement("div",null,k.default.createElement(f.default,{gutter:16,className:"gutter"},k.default.createElement(m.default,{className:"gutter-row",sm:8},k.default.createElement(R,{placeholder:"\u8bf7\u8f93\u5165\u641c\u7d22\u7684\u7528\u6237\u540d",prefix:k.default.createElement(b.default,{type:"user"}),value:t,onChange:this.onChangeUserName,onSearch:this.onSearchUserName,enterButton:!0})))),k.default.createElement("div",{style:{margin:"20px 0px 0px 0px"}},k.default.createElement(f.default,{gutter:16,className:"gutter"},k.default.createElement(m.default,{className:"gutter-row",sm:8},k.default.createElement(c.default,{type:"primary",onClick:this.CreateItem},k.default.createElement(b.default,{type:"plus-circle"}),"\u65b0\u5efa")))),k.default.createElement("div",{style:{margin:"20px 0px 0px 0px"}},k.default.createElement(F.default,{dataSource:a,checkChange:this.checkChange,onDelete:this.onDelete,editClick:this.editClick,loading:l}),r?k.default.createElement(U.default,{ref:this.saveFormRef,visible:n,onCancel:this.handleCancel,onCreate:this.handleUpdate,title:"\u4fee\u6539\u7528\u6237\u4fe1\u606f",okText:"\u66f4\u65b0"}):k.default.createElement(U.default,{ref:this.saveFormRef,visible:n,onCancel:this.handleCancel,onCreate:this.handleCreate,title:"\u65b0\u5efa\u7528\u6237\u4fe1\u606f",okText:"\u521b\u5efa"}))))}}]),t}(_.Component)),I=function(e,t){return{roles:e.userrole.roles}},D=u.default.create()((0,N.connect)(I)(T));t.default=D},1295:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=a(45),u=n(s),i=a(73),c=n(i),d=a(8),f=n(d),p=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(46),a(75),a(22);var m=a(0),h=n(m),b=a(13),g=(n(b),function(e){function t(e){return r(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return o(t,e),p(t,[{key:"render",value:function(){var e=this.props,t=e.checkChange,a=e.onDelete,n=e.editClick,r=e.dataSource,l=e.loading,o={onChange:t,getCheckboxProps:function(e){return{disabled:"Disabled User"===e.username}}},s=[{title:"\u59d3\u540d",dataIndex:"username",width:100},{title:"\u53c8\u540d",dataIndex:"loginname",width:100},{title:"\u5bc6\u7801",dataIndex:"password",width:100},{title:"\u4eba\u5458\u63cf\u8ff0",dataIndex:"desc",width:100},{title:"\u64cd\u4f5c",dataIndex:"opera",width:100,render:function(e,t){return h.default.createElement("div",{className:"opera"},h.default.createElement("span",{onClick:function(){return n(t.id)}},h.default.createElement("a",null,h.default.createElement(f.default,{type:"edit"})," \u4fee\u6539")),"\xa0\xa0\xa0\xa0",h.default.createElement("span",null,h.default.createElement(c.default,{title:"\u786e\u5b9a\u8981\u5220\u9664\u5417?",onConfirm:function(){return a(t.id)}},h.default.createElement("a",null,h.default.createElement(f.default,{type:"minus-square-o"})," \u5220\u9664 "))))}}];return h.default.createElement(u.default,{rowSelection:o,columns:s,dataSource:r,loading:l,bordered:!0,scroll:{x:"100%"},className:"UserTable",rowKey:"id"})}}]),t}(m.Component));t.default=g},1296:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=a(61),u=n(s),i=a(37),c=n(i),d=a(72),f=n(d),p=a(26),m=n(p),h=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(62),a(35),a(74),a(27);var b=a(0),g=n(b),y=a(13),v=(n(y),a(19)),E=a(156),w=a(137),C=m.default.Item,O=f.default.Option,_=function(e){function t(e){r(this,t);var a=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.componentWillMount=function(){(0,v.getuserroles)().then(function(e){a.setState({roledata:e.data.data})})},a.setOptions=function(e){return e.map(function(e){return g.default.createElement(O,{value:e.id,key:e.id,dataref:e},e.rolename)})},a.handleChange=function(e,t){console.log(e),console.log(t);var n=[];t.map(function(e){n.push(e.props.dataref)}),a.props.setuserroles(n)},a.state={roledata:[]},a}return o(t,e),h(t,[{key:"render",value:function(){var e=this.props,t=e.visible,a=e.onCancel,n=e.onCreate,r=e.form,l=e.okText,o=e.title,s=this.state.roledata,i=r.getFieldDecorator,d={labelCol:{span:5},wrapperCol:{span:16}};return g.default.createElement(u.default,{visible:t,title:o,okText:l,onCancel:a,onOk:n},g.default.createElement(m.default,{layout:"horizontal"},g.default.createElement(C,Object.assign({label:"\u4e3b\u952e"},d,{hasFeedback:!0,style:{display:"none"}}),i("id",{rules:[{required:!1,message:"\u8bf7\u8f93\u5165\u4e3b\u952e\uff01"}]})(g.default.createElement(c.default,null))),g.default.createElement(C,Object.assign({label:"\u59d3\u540d"},d,{hasFeedback:!0}),i("username",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u59d3\u540d\uff01"}]})(g.default.createElement(c.default,null))),g.default.createElement(C,Object.assign({label:"\u5bc6\u7801"},d,{hasFeedback:!0}),i("password",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5bc6\u7801\uff01"}]})(g.default.createElement(c.default,null))),g.default.createElement(C,Object.assign({label:"\u7528\u6237\u89d2\u8272"},d,{hasFeedback:!0}),i("roles",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7528\u6237\u89d2\u8272\uff01"}]})(g.default.createElement(f.default,{showSearch:!0,placeholder:"\u8bf7\u9009\u62e9\u89d2\u8272",optionFilterProp:"children",onChange:this.handleChange,mode:"multiple",filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0}},this.setOptions(s)))),g.default.createElement(C,Object.assign({label:"\u53c8\u540d"},d,{hasFeedback:!0}),i("loginname",{rules:[{required:!1,message:"\u8bf7\u8f93\u5165\uff01"}]})(g.default.createElement(c.default,null))),g.default.createElement(C,Object.assign({label:"\u4eba\u5458\u63cf\u8ff0"},d,{hasFeedback:!0}),i("desc",{rules:[{required:!1,message:"\u8bf7\u8f93\u5165\u5bc6\u7801\uff01"}]})(g.default.createElement(c.default,null)))))}}]),t}(b.Component),k=function(e,t){return{roles:e.userrole.roles}},j={setuserroles:E.setuserroles},x=m.default.create()((0,w.connect)(k,j)(_));t.default=x}});
//# sourceMappingURL=0.dcf2053e.chunk.js.map